/* client/src/styles/Cake.css */
.cake-container {
    padding: 20px 0;
    /* center-screen class from Passcode.css handles centering */
}

.start-overlay {
    padding: 20px;
    background: rgba(255,255,255,0.5);
    border: 2px dashed var(--win-border-dark);
    margin-bottom: 20px;
}

.wish-granted-msg {
    animation: popIn 0.5s ease-out;
    color: var(--retro-brown);
}

/* CSS CAKE ART */
.cake {
    position: relative;
    width: 250px;
    height: 200px;
    margin: 60px auto 20px auto; /* Margin top for candles */
}

/* Make the cake shake slightly when mic is active */
.mic-active {
    animation: vibrate 0.3s linear infinite;
}

.plate {
    position: absolute;
    bottom: -20px;
    left: -25px;
    width: 300px;
    height: 40px;
    background: #ccc;
    border-radius: 50%;
    box-shadow: 0 5px 0 #999, 0 10px 10px rgba(0,0,0,0.2);
}

.layer {
    position: absolute;
    width: 250px;
    height: 60px;
    border-radius: 50% 50% 0 0 / 20px 20px 0 0;
    /* Pixelated borders */
    border-left: 4px solid #5a3e2b;
    border-right: 4px solid #5a3e2b;
}

.layer-bottom { bottom: 0; background: #8B4513; z-index: 1; }
.layer-middle { bottom: 60px; background: #A0522D; z-index: 2; }
.layer-top { bottom: 120px; background: #CD853F; z-index: 3; height: 50px; }

.icing {
    position: absolute;
    top: 25px;
    left: -5px;
    width: 260px;
    height: 30px;
    background: #fff;
    border-radius: 50%;
    z-index: 4;
    box-shadow: 0 3px 0 #ddd;
}

/* CANDLES */
.candles-container {
    position: absolute;
    top: -50px;
    width: 100%;
    display: flex;
    justify-content: space-evenly;
    z-index: 5;
}

.candle { position: relative; width: 15px; height: 50px; }
.wax {
    width: 100%; height: 100%;
    background: repeating-linear-gradient(45deg, var(--retro-pink), var(--retro-pink) 5px, #fff 5px, #fff 10px);
    border: 2px solid #333;
}
.wick {
    width: 4px; height: 10px; background: #333;
    margin: 0 auto; position: relative; top: -5px;
}

.flame {
    position: absolute;
    top: -25px; left: 50%; transform: translateX(-50%);
    width: 15px; height: 25px;
    background: orange;
    border-radius: 50% 50% 20% 20% / 60% 60% 40% 40%;
    background-image: linear-gradient(white, yellow, orange);
    animation: flicker 0.5s infinite alternate;
    opacity: 1;
    transition: opacity 0.5s;
}

.flame.out {
    opacity: 0;
    animation: none;
}

/* ANIMATIONS */
@keyframes flicker {
    0% { transform: translateX(-50%) scale(1); }
    100% { transform: translateX(-50%) scale(0.9) rotate(2deg); }
}

@keyframes vibrate {
  0% { transform: translate(0); }
  20% { transform: translate(-1px, 1px); }
  40% { transform: translate(-1px, -1px); }
  60% { transform: translate(1px, 1px); }
  80% { transform: translate(1px, -1px); }
  100% { transform: translate(0); }
}

@keyframes popIn {
    from { transform: scale(0); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}