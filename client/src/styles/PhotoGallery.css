.gallery-explorer {
    background: #d4d0c8;
    /* FIX: Use viewport height units so it fits on screen */
    height: 60vh; 
    max-height: 500px;
    display: flex;
    flex-direction: column;
    border: 1px solid #fff;
    font-family: 'Verdana', sans-serif;
    font-size: 11px;
}

.explorer-toolbar, .address-bar-row {
    padding: 3px;
    border-bottom: 1px solid #808080;
    display: flex; gap: 10px;
    align-items: center;
}
.address-input {
    background: white; border: 2px inset #d4d0c8;
    flex-grow: 1; padding: 2px;
}

.explorer-body {
    flex-grow: 1;
    display: flex;
    background: white;
    border: 2px inset #d4d0c8;
    margin: 2px;
    /* FIX: Ensure body doesn't overflow parent */
    overflow: hidden; 
}

.explorer-sidebar {
    width: 120px;
    background: #fff;
    border-right: 1px solid #d4d0c8;
    padding: 5px;
}
.sidebar-item { padding: 2px; cursor: pointer; }
.sidebar-item.open { font-weight: bold; background: #000080; color: white; }
.sub-item { padding-left: 15px; }

.icons-view {
    flex-grow: 1;
    padding: 10px;
    display: flex;
    flex-wrap: wrap;
    align-content: flex-start;
    gap: 15px;
    /* FIX: Scroll ONLY the icons area */
    overflow-y: auto; 
}

.desktop-icon {
    width: 70px;
    text-align: center;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.desktop-icon:hover .icon-img { opacity: 0.8; }
.desktop-icon:hover .icon-text { background: #000080; color: white; }

.icon-img {
    width: 48px; height: 48px;
    margin-bottom: 4px;
    display: flex; justify-content: center; align-items: center;
}
.icon-img img { width: 100%; height: 100%; object-fit: cover; border: 1px solid gray; }
.upload-img { font-size: 30px; border: 1px dashed black; }

.icon-text {
    word-break: break-all;
    padding: 0 2px;
}

.explorer-status-bar {
    border-top: 1px solid #fff;
    padding: 2px 5px;
}

.photo-modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5);
    display: flex; justify-content: center; align-items: center;
    z-index: 9999;
}
.modal-win { width: 90%; max-width: 800px; }